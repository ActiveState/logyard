
* more unit tests?

* manual testing, before merge.

# feature

* `logyard-cli status`

  * FATAL|RETRYING.Error

* `s drain status`?

  * store per-node status in redis?
  * over-kill? just tell to use `logyard-cli status`?

# bugs

* panic: runtime error: close of closed channel in Tomb.Done
  from ip_drain.go:34 via drain.go:50

* interrupting `logyard-cli stream` sometimes leads to:

```
2013/04/30 21:44:04 INFO -- [drain:tmp.logyard-cli.192.168.1.107-7480] Stopped STM.
2013/04/30 21:44:04 INFO -- [CONFIG.4] Done checking drains.
2013/04/30 21:44:04 INFO -- [drain:tmp.logyard-cli.192.168.1.107-7480] [STM] Drain exited -- write tcp 192.168.1.107:7480:
 broken pipe
panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x20 pc=0x4a0bf5]

goroutine 27 [running]:
logyard/util/state.(*StateMachine).Log(0xf840109d80, 0x69fc7c, 0x4d54535b00000020, 0xf840168730, 0x100000001, ...)
        /s/go/src/logyard/util/state/machine.go:32 +0x79
logyard/util/state.(*StateMachine).setStateCustom(0xf840109d80, 0x2, 0xf84016cc30, 0x0, 0x7f4ca4e62f78, ...)
        /s/go/src/logyard/util/state/machine.go:93 +0x3e8
logyard/util/state.(*StateMachine).monitor(0xf840109d80, 0x2, 0x0, 0x0)
        /s/go/src/logyard/util/state/machine.go:140 +0x1e5
created by logyard/util/state.(*StateMachine).start
        /s/go/src/logyard/util/state/machine.go:122 +0x1af
```
